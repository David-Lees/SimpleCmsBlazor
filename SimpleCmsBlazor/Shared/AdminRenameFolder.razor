@using SimpleCmsBlazor.Models
@using SimpleCmsBlazor.Services

<MatDialog @bind-IsOpen="@dialogIsOpen">
    <MatDialogTitle>Rename Folder "@folder.Name"</MatDialogTitle>
    <MatDialogContent>
        <MatTextField Outlined="true" Label="Folder name:" Hint="The new name of the folder" @bind-Value="@folderName"></MatTextField>


    </MatDialogContent>
    <MatDialogActions>
        <MatButton OnClick="@Dismiss">Cancel</MatButton>
        <MatButton OnClick="@RenameFolder">Rename Folder</MatButton>
    </MatDialogActions>
</MatDialog>

@inject FolderService _folderService;
@code {
    bool dialogIsOpen = false;
    string folderName = "New Folder";
    [Inject] public GalleryFolder folder { get; set; } = new GalleryFolder();

    public void Open(GalleryFolder f)
    {
        folder = f;
        dialogIsOpen = true;
        StateHasChanged();
    }

    public void Dismiss()
    {
        dialogIsOpen = false;
        StateHasChanged();
    }

    public async Task RenameFolder()
    {
        folder.Name = this.folderName;
        await _folderService.CreateAsync(folder);
        Dismiss();
    }
}
