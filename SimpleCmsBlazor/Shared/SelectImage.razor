@using SimpleCmsBlazor.Services
@inherits HxDialogBase<GalleryImage>

<HxModal Fullscreen="ModalFullscreen.Always" Size="ModalSize.ExtraLarge" Title="Select Image" @ref="modal">
    <BodyTemplate>
        <div class="row mt-4">
            <div class="col-4">
                <h5>Select folder:</h5>
                <MediaTree SelectedFolder="@currentFolder" SelectedChanged="@SelectFolder"></MediaTree>
            </div>
            <div class="col-8">
                @if (currentFolder != null && images != null)
                {
                    <h5>Media for folder: @currentFolder.Name</h5>
                    <MediaList Images="@images"
                        CanSort="false"
                               CanDelete="false"
                               CanSelect="true"
                               CanMove="false"
                               Selected="@Select">
                    </MediaList>
                }
            </div>
        </div>
    </BodyTemplate>
    <FooterTemplate>
        <HxButton Text="Cancel" Color="ThemeColor.Secondary" OnClick="async () => await HideAsCancelledAsync()" />
    </FooterTemplate>
</HxModal>